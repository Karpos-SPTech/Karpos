<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../SiteKarpo/style-simulador-financeiro.css">
    <link rel="shortcut icon" href="../SiteKarpo/assets/logo-contato.png" type="image/x-icon">
    <title>Karpos</title>
</head>

<body>

    <header>
        <a href="../SiteKarpo/index.html">
            <div id="logo-karpos"><img src="../SiteKarpo/assets/Logo.png" alt="logo"></div>
        </a>
        <ul>
            <li><a href="../SiteKarpo/index.html">Início</a></li>
            <li style="width: max-content;"><a href="../SiteKarpo/sobre-nos.html">Sobre Nós</a></li>
            <li><a href="../SiteKarpo/serviços.html">Serviços</a></li>
            <li style="width: max-content;"><a href="../SiteKarpo/simulador-financeiro.html">Simulador Financeiro</a>
            </li>
            <li><a href="../SiteKarpo/contato.html">Contato</a></li>
        </ul>
        <a href="https://linktr.ee/karpostech" target="_blank" id="social-medias"><img
                src="../SiteKarpo/assets/Socials.png" alt=""></a>
    </header>

    <div class="pagina-contato">
        <h1 class="titulo" id="bemvindo">Bem Vindo!</h1>
        <h2 class="subtitulo" id="preencha">Preencha o formulário abaixo e faremos um orçamento para a sua empresa</h2>
        <div class="conteudo-contato">
            <div class="container">
                <div class="esquerda">
                    <!-- Div com a nossa logo de contato -->
                    <div class="logo-contato">
                        <img src="../SiteKarpo/assets/logo-contato.png" alt="Logo de Contato">
                    </div>
                </div>
                <div class="direita">
                    <!-- Campo Nome da Empresa -->
                    <div class="input-container">
                        <label for="nome-empresa">Nome da Empresa</label>
                        <input type="text" id="nome_empresa" placeholder="Ex: Karpos Technology" class="input">
                    </div>
                    <!-- Campo Custo médio do plantio -->
                    <div class="input-container">
                        <label for="plantioMedio">Custo médio do plantio (Hectare)</label>
                        <div class="currency">R$</div>
                        <input type="number" id="plantioMedio_input" placeholder="xxxxxxx " class="input">
                    </div>
                    <!-- Campo Média de perdas -->
                    <div class="input-container">
                        <label for="perdas">Média de perdas (Hectare)</label>
                        <div class="currency">R$</div>
                        <input type="number" id="quantidade_perdas_input" placeholder="xxxxxxxx" class="input">
                    </div>
                    <!-- Botão de Simular -->
                    <button class="botaoSimular" onclick="calcular()">Simular</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resultado da Simulação -->
    <div id="resultadoSimulacao">
        <div class="conteudoSimulacao">
            <div class="boxSimulacao">
                <div class="cartoes">
                    <div class="cartao">
                        <h2>Título do Cartão 1</h2>
                        <p>Conteúdo do Cartão 1</p>
                    </div>
                    <div class="cartao">
                        <h2>Título do Cartão 2</h2>
                        <p>Conteúdo do Cartão 2</p>
                    </div>
                    <div class="cartao">
                        <h2>Título do Cartão 3</h2>
                        <p>Conteúdo do Cartão 3</p>
                    </div>
                </div>
                <div class="grafico-container">
                    <canvas id="myChart"></canvas>
                </div>

                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            </div>
            <button onclick="limpar()" class="fecharSimulacao">Voltar</button>
        </div>
    </div>

    <script>

        document.addEventListener("DOMContentLoaded", function () {
            const botaoSimular = document.querySelector('.botaoSimular');
            const resultadoSimulacao = document.querySelector('#resultadoSimulacao');
            const conteudoContato = document.querySelector('.conteudo-contato');
            const botaoFechar = document.querySelector('.fecharSimulacao');

            botaoSimular.addEventListener('click', () => {
                resultadoSimulacao.classList.add('ativa'); // Mostra o resultado da simulação
                conteudoContato.classList.add('ativa'); // Oculta o conteúdo de contato
            });

            botaoFechar.addEventListener('click', () => {
                resultadoSimulacao.classList.remove('ativa'); // Esconde o resultado da simulação
                conteudoContato.classList.remove('ativa'); // Mostra o conteúdo de contato
            });
        });

        function limpar() {
            quantidade_perdas_input.value = "";
            plantioMedio_input.value = "";
            nome_empresa.value = "";
            const tituloPaginaContato = document.querySelector('.titulo');
            const subtituloPaginaContato = document.querySelector('.subtitulo');

            tituloPaginaContato.textContent = "Bem vindo!";
            subtituloPaginaContato.textContent = "Preencha o formulário abaixo e faremos um orçamento para a sua empresa";
        }

        function calcular() {
            let perdaFungoCiclo = Number(quantidade_perdas_input.value);
            let custoPlantioCiclo = Number(plantioMedio_input.value);
            let porcentagemRecuperacao = (perdaFungoCiclo / custoPlantioCiclo) * 100;

            let formatCustoPlantioCiclo = custoPlantioCiclo.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            let formatPerdaFungoCiclo = perdaFungoCiclo.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

            const tituloPaginaContato = document.querySelector('.titulo');
            const subtituloPaginaContato = document.querySelector('.subtitulo');

            tituloPaginaContato.textContent = "Simulação Pronta!";
            subtituloPaginaContato.textContent = "Aqui está a sua simulação de perdas e o quanto você pode lucrar com a nossa solução";

            const cartaoCustoPlantio = document.querySelector('.cartao:nth-child(1)');
            const cartaoPerda = document.querySelector('.cartao:nth-child(2)');
            const cartaoOportunidade = document.querySelector('.cartao:nth-child(3)');

            cartaoCustoPlantio.querySelector('h2').textContent = 'Custo total do Plantio';
            cartaoCustoPlantio.querySelector('p').innerHTML = `<b>${formatCustoPlantioCiclo}</b>`;

            cartaoPerda.querySelector('h2').textContent = 'Média de perda por ciclo';
            cartaoPerda.querySelector('p').innerHTML = `<b style="color:red;">${formatPerdaFungoCiclo}</b>`;

            cartaoOportunidade.querySelector('h2').textContent = 'Oportunidade';
            cartaoOportunidade.querySelector('p').innerHTML = `Com base nos dados informados anteriormente, nosso projeto <br>será capaz de <b>reduzir</b> sua perda em até <b>${porcentagemRecuperacao.toFixed(2)}%</b>`;

            const config = {
                type: 'pie',
                data: {
                    labels: ['Custo Total do Plantio', 'Média de Perda por Ciclo'],
                    datasets: [{
                        label: 'Valores',
                        data: [custoPlantioCiclo, perdaFungoCiclo],
                        backgroundColor: [
                            '#a17f6c',
                            '#805b46'
                        ],
                        borderColor: [
                            '#745c4f',
                            '#50392c'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            labels: {
                                color: 'black' // Define a cor das labels como vermelho
                            }
                        }
                    },
                        y: {
                            beginAtZero: true // Garante que o eixo y comece em zero
                        }
                }
            };
            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, config);

        }
    </script>
</body>

</html>